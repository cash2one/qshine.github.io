---
title: 动态规划四挖金矿问题
date: 2017-07-05 20:55:00
categories: 数据结构和算法
tags:
---


### 注: 本篇内容为笔记, 强烈公众号: **梦见**, 解释的非常详细

**问题**: 有一个国家发现了5座金矿，每座金矿的黄金储量不同，需要参与挖掘的工人数也不同。参与挖矿工人的总数是10人, 每座金矿要么全挖, 要么不挖, 怎么得到更多黄金?

|金矿序号|黄金数量|需要工人数|
|--------|--------|----------|
|a|500|5|
|b|200|3|
|c|300|4|
|d|350|3|
|e|400|5|


看原文的时候是懵逼的, 不过一直记得<<图解算法>>里面说的**所有动态规划问题都能用表格实现**, 

|-|1|2|3|4|5|6|7|8|9|10|
|-|-|-|-|-|-|-|-|-|-|-|
|a/500/5人|0|0|0|0|500(a)|500(a)|500(a)|500(a)|500(a)|500(a)|
|b/200/3人|0|0|200(b)|200(b)|500(a)|500(a)|500(a)|700(ab)|700(ab)|700(ab)|
|c/300/4人|0|0|200(b)|300(c)|500(a)|500(a)|500(a)|700(ab)|800(ac)|800(ac)|
|d/350/3人|0|0|350(d)|350(d)|500(a)|550(bd)|650(cd)|850(ad)|850(ad)|850(ad)|
|e/400/5人|0|0|350(d)|350(d)|500(a)|550(bd)|650(cd)|850(ad)|850(ad)|900(ae)|

以上可看到最大是`900(ae)`, 金矿序号并不需要从大到小排列, 不会影响结果.

每个单元格value的计算公式是
```
x = 上一行同一列的单元格的值
y = 当前行金矿价值 + 上一行中[剩余工人数]对应单元格的值
value = max(x, y)
```


和最长公共子序列一样, 都能使用单元格表示法

```python
# coding:utf-8

def test(golds, peoples):
    golds.insert(0, [0, 0, 0])       # 给golds列表插入一行
    golds_length = len(golds)        # y轴
    peoples_length = peoples + 1     # x轴
    
    # 构建表格, 多一行和一列
    tables = [[0]*peoples_length for i in range(golds_length)]

    for j in xrange(1, golds_length):
        for i in xrange(1, peoples_length):
            if i >= golds[j][2]:
                tables[j][i] = max(tables[j-1][i], golds[j][1]+tables[j-1][i-golds[j][2]])
            else:
                tables[j][i] = tables[j-1][i]


    for row in tables[1:]:
        print row[1:]







test([
        ['a', 400, 5],
        ['b', 500, 5],
        ['c', 200, 3],
        ['d', 300, 4],
        ['e', 350, 3],
    ], 10)



"""
输出
[0, 0, 0, 0, 400, 400, 400, 400, 400, 400]
[0, 0, 0, 0, 500, 500, 500, 500, 500, 900]
[0, 0, 200, 200, 500, 500, 500, 700, 700, 900]
[0, 0, 200, 300, 500, 500, 500, 700, 800, 900]
[0, 0, 350, 350, 500, 550, 650, 850, 850, 900]
"""
```


### 总结
1. 5金矿10工人, 动态规划需要计算50次, 递归需要计算2^5是32次
2. 10金矿10工人, 动态规划需要计算100次, 递归需要计算2^10是1024次
3. 5金矿1000工人, 动态规划计算5000次, 递归计算32次
4. 10金矿1000工人, 动态规划10000次, 递归1024次

当工人数量很多的时候, 动态规划不如递归, 具体看应用场景

